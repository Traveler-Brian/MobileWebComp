function exampleImageData() {
    return "data:image/jpeg;base64,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";
  }

  function byteLength(str) {
    // returns the byte length of an utf8 string
    var s = str.length;
    for (var i=str.length-1; i>=0; i--) {
      var code = str.charCodeAt(i);
      if (code > 0x7f && code <= 0x7ff) s++;
      else if (code > 0x7ff && code <= 0xffff) s+=2;
      if (code >= 0xDC00 && code <= 0xDFFF) i--; //trail surrogate
    }
    return s;
  }
  
  var _lsTotal = 0,
    _xLen, _x;
  for (_x in localStorage) {
      if (!localStorage.hasOwnProperty(_x)) {
          continue;
      }
      _xLen = ((localStorage[_x].length + _x.length) * 2);
      _lsTotal += _xLen;
      
  };

  var localStorageUsed = _lsTotal;

  if(localStorage.getItem("ID") == undefined || localStorage.getItem("ID").length != 20) {
    location.href = "index.html";
  }
  
  /*Set examples */
  var ex = {
    Name: "祥記麵家",
    AddressText: "68 R. da Felicidade, マカオ",
    AddressRec: {
      Latitude: 22.1948476,
      Longitude: 113.5374873,
    },
    Remark: "說真的，要不是入選為2018年度米其林推薦榜單的列表餐廳中，祥記麵家應該不會在我這次澳門美食的名單之中，翻開澳門特色美食頁章，竹昇打麵這項傳統技藝從廣州飄洋到澳門發揚光大，祥記麵家名氣或許不同於 黃枝記粥麵 的廣泛與高調，開設在澳門曾經最繁榮興盛的青樓老街上，會來的客人都是為了這碗招牌蝦子撈麵上門。",
    Image: [exampleImageData()]
  }
  
  localStorage.setItem("Example", LZString.compress(JSON.stringify(ex)));
  if(localStorage.getItem("Longitude") !== undefined) {
    localStorage.removeItem("Latitude");
    localStorage.removeItem("Longitude");
  }
  
  // console.log(JSON.stringify(ex));
  
  if(window.outerHeight < window.outerWidth && !location.href.includes("boomboom")) {
    alert("很抱歉，本網站暫時只提供移動端設備使用。\n如果您正在使用移動端訪問此網站，請勿使用橫向螢幕。\n按下「確認」重新載入。");
    location.href = location.href;
  }
  
  function getLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(showPosition);
    } else {
      alert("Geolocation is not supported by this browser.");
    }
  }
  
  function showPosition(position) {
    console.log(position.coords.latitude);
    console.log(position.coords.longitude);
    localStorage.setItem("Latitude", position.coords.latitude);
    localStorage.setItem("Longitude", position.coords.longitude);
    console.log(localStorage.getItem("Latitude"));
    console.log(localStorage.getItem("Longitude"));
    if(localStorage.getItem("Latitude") !== undefined && localStorage.getItem("Longitu") !== undefined) {
      console.log(localStorage.getItem("Latitude"));
      console.log(localStorage.getItem("Longitude"));
      $("input[name=address]")[0].setAttribute("placeholder","已嘗試獲得經緯度，您也可以在此輸入更為準確的地址。");
      $("input[name=latitude]")[0].setAttribute("value",localStorage.getItem("Latitude"));
      $("input[name=longitude]")[0].setAttribute("value",localStorage.getItem("Longitude"));
    }
  }
  
  
  function removeImg(data) {
    $("div[data='"+data+"']")[0].remove();
  }
  
  function compress() { 
    let fileObj = document.getElementById('camera').files[0] //上传文件的对象
    let reader = new FileReader()
    reader.readAsDataURL(fileObj)
    reader.onload = function(e) {
        let image = new Image() //新建一个img标签（还没嵌入DOM节点)
        image.src = e.target.result
        image.onload = function() {
            let canvas = document.createElement('canvas'), 
            context = canvas.getContext('2d'),
            imageWidth = image.width / 2,    //压缩后图片的大小
            imageHeight = image.height / 2,
            data = ''

            canvas.width = imageWidth
            canvas.height = imageHeight

            context.drawImage(image, 0, 0, imageWidth, imageHeight)
            data = canvas.toDataURL('image/jpeg')

            //压缩完成 
            return data
        }
    }
}
  
  function readFile() {
    if($(".selectedImages").length >= 2) {
      alert("您最多只能上載兩張照片。");
      return;
    }
    
    

    if (this.files && this.files[0]) {
      
      var FR= new FileReader();
      
      FR.addEventListener("load", function(e) {
        let image = new Image() //新建一个img标签（还没嵌入DOM节点)
        image.src = e.target.result
        image.onload = function() {
            let canvas = document.createElement('canvas'), 
            context = canvas.getContext('2d'),
            imageWidth = 400,    //压缩后图片的大小
            imageHeight = (400/image.width)*image.height,
            data = ''

            canvas.width = imageWidth
            canvas.height = imageHeight

            context.drawImage(image, 0, 0, imageWidth, imageHeight)
            data = canvas.toDataURL('image/jpeg')
            $(".imageView").html($(".imageView")[0].innerHTML + "<div data='" + data + "' width=150px height=150px class='selectedImages' style='background-image:url(\""+data+"\")'>" + "<a href='javascript:removeImg(\""+data+"\")'>移除</a></div>")
            
        }
        // $(".imageView").html($(".imageView")[0].innerHTML + "<div data='" + compress() + "' width=150px height=150px class='selectedImages' style='background-image:url(\""+compress()+"\")'>" +
        //                     "<a href='javascript:removeImg(\""+compress()+"\")'>移除</a></div>")
        // document.getElementById("img").src       = e.target.result;
        // document.getElementById("b64").innerHTML = e.target.result;
      }); 
      
      FR.readAsDataURL( this.files[0] );
    }
    
  }
  
  function recSubmit() {
    $(".loading > img")[0].style.display = "block";
    setTimeout(() => {
      var Name = $("input[name=name]")[0].value;
    var Address = $("input[name=address]")[0].value;
    var Latitude = $("input[name=latitude]")[0].value;
    var Longitude = $("input[name=longitude]")[0].value;
    var Remark = $("input[name=remark]")[0].value;
    var Images = [];
    if(Name == "" || Remark == "") {
      $(".loading > img")[0].style.display = "none";
      alert("請完整填寫資訊！");
      return;
    }else{
      if((Latitude == "" || Latitude == undefined || Latitude == null) && Address == "") {
        $(".loading > img")[0].style.display = "none";
          alert("請完整填寫資訊！");
          return;
        }
    }
    if($(".selectedImages")[0] == undefined) {
      $(".loading > img")[0].style.display = "none";
      alert("您必須拍攝至少一張照片！");
      return;
    }
    
    var r = confirm("我們正在對圖片進行壓縮，可能需要一些時間，如果可以開始請按下確認按鈕。");
    if(r!=true){$(".loading > img")[0].style.display = "none";return;}
    var fileSize = 0;
    $(".selectedImages").each(function(index){
      Images.push($(".selectedImages")[index].getAttribute("data"));
    });

    
    
    var Dict = {
      Name: Name,
      AddressText: Address,
      AddressRec: {
        Latitude: Latitude,
        Longitude: Longitude
      },
      Remark: Remark,
      Image: Images
    }
    
    fileSize = byteLength(LZString.compress(LZString.decompress(localStorage.getItem("myData")) + "," + JSON.stringify(Dict)));

    console.log(fileSize);
    if(fileSize > 4*1024*1024) {
      $(".loading > img")[0].style.display = "none";
      alert("很抱歉，您的本地存儲空間不足，請嘗試清除或更換其他瀏覽器。");
      return;
    }

    // console.log(JSON.stringify(Dict));
    
    if(localStorage.getItem("myData") == undefined) {
      localStorage.setItem("myData", LZString.compress(""));
    }
    if(localStorage.getItem("myData") != LZString.compress("")) {
      localStorage.setItem("myData", LZString.compress(LZString.decompress(localStorage.getItem("myData")) + "," + JSON.stringify(Dict)));
    }else{
      localStorage.setItem("myData", LZString.compress(LZString.decompress(localStorage.getItem("myData")) + JSON.stringify(Dict)));
    }
    console.log(JSON.parse("["+LZString.decompress(localStorage.getItem("myData"))+"]"));

    $("input[name=name]")[0].value = "";
    $("input[name=address]")[0].value = "";
    $("input[name=latitude]")[0].value = "";
    $("input[name=longitude]")[0].value = "";
    $("input[name=remark]")[0].value = "";
    $(".selectedImages").remove();
    $(".lity-close")[0].click();
    $(".loading > img")[0].style.display = "none";
      var ex = LZString.decompress(localStorage.getItem("Example"));
      ex = JSON.parse(ex);
      var dom = "<ul class='w3-ul'>";
      dom += "<li><h2>所有「發現」</h2></li>";
      dom += "<li><a href='javascript:showDetails(\"" + "Example" + "\", \"Example\")'>" + ex.Name + "</a></li>";
      if(localStorage.getItem("myData") != undefined) {
        var localData = JSON.parse("["+LZString.decompress(localStorage.getItem("myData"))+"]");
        localData.forEach(function(item){
          dom += "<li><a href='javascript:showDetails(\"" + item.Image[0] + "\", \"" + item.Name + "\")'>" + item.Name + "</a></li>";
        });
        dom += "</ul>"
      }
      $("#details")[0].innerHTML = dom;
    alert("數據儲存成功！");
    }, 100);
    
  }
  
  
  document.getElementById("camera").addEventListener("change", readFile);
  
  
  
  
  $(".submit-record")[0].addEventListener("click", getLocation());
  $(".submit-record")[0].addEventListener("click", function(){$("#openSubmitPage").click();});
  $(".view-all-records")[0].addEventListener("click", function(){
    $("#openViewAllPage").click();
  });

  function showDetails(rec, ver) {
    $(".loading > img")[0].style.display = "block";
    setTimeout(() => {
      
    var ex = LZString.decompress(localStorage.getItem("Example"));
    ex = JSON.parse(ex);
    if(rec == "Example") {
      $("#popupViewDetails")[0].innerHTML = "<h1>" + ex.Name + "</h1>" +
      "<h4>" + ex.AddressText + "</h4>" +
      "<p>" + ex.Remark + "</p>" +
      "<img src='" + ex.Image[0] + "' />";
      $("#openViewDetailsPage").click();
    }else{
      var localData = JSON.parse("["+LZString.decompress(localStorage.getItem("myData"))+"]");
      localData.forEach(function(item){
        if(rec == item.Image[0]&& item.Name == ver) {
          $("#popupViewDetails")[0].innerHTML = "<h1>" + item.Name + "</h1>" +
          "<h4>" + item.AddressText + "</h4>" +
          "<p>" + item.Remark + "</p>" +
          "<img src='" + item.Image[0] + "' />";
          if(item.Image[1] != undefined) {
            $("#popupViewDetails")[0].innerHTML += "<img src='" + item.Image[1] + "' />";
          }
          $("#openViewDetailsPage").click();
        }
      });
    }
    $(".loading > img")[0].style.display = "none";
    }, 100);
  }

    // var ex = localStorage.getItem("Example");
    // ex = JSON.parse(ex);
    // $("#details")[0].innerHTML += "<ul class='w3-ul'><li><h2>所有「發現」</h2></li></ul>";
    // $("#details > ul")[0].innerHTML += "<li><a href='javascript:showDetails(\"" + "Example" + "\", \"Example\")'>" + ex.Name + "</a></li>"
    // var localData = JSON.parse("["+localStorage.getItem("myData")+"]");
    // localData.forEach(function(item){
    //   $("#details > ul")[0].innerHTML += "<li><a href='javascript:showDetails(\"" + LZString.decompress(item.Image[0]) + "\", \"" + item.Name + "\")'>" + item.Name + "</a></li>";
    // });

    var ex = LZString.decompress(localStorage.getItem("Example"));
      ex = JSON.parse(ex);
      var dom = "<ul class='w3-ul'>";
      dom += "<li><h2>所有「發現」</h2></li>";
      dom += "<li><a href='javascript:showDetails(\"" + "Example" + "\", \"Example\")'>" + ex.Name + "</a></li>";
      if(localStorage.getItem("myData") != undefined) {
        var localData = JSON.parse("["+LZString.decompress(localStorage.getItem("myData"))+"]");
        localData.forEach(function(item){
          dom += "<li><a href='javascript:showDetails(\"" + item.Image[0] + "\", \"" + item.Name + "\")'>" + item.Name + "</a></li>";
        });
        dom += "</ul>"
      }
      $("#details")[0].innerHTML = dom;
    // setInterval(function(){
    //   var ex = LZString.decompress(localStorage.getItem("Example"));
    //   ex = JSON.parse(ex);
    //   var dom = "<ul class='w3-ul'>";
    //   dom += "<li><h2>所有「發現」</h2></li>";
    //   dom += "<li><a href='javascript:showDetails(\"" + "Example" + "\", \"Example\")'>" + ex.Name + "</a></li>";
    //   if(localStorage.getItem("myData") != undefined) {
    //     var localData = JSON.parse("["+LZString.decompress(localStorage.getItem("myData"))+"]");
    //     localData.forEach(function(item){
    //       dom += "<li><a href='javascript:showDetails(\"" + item.Image[0] + "\", \"" + item.Name + "\")'>" + item.Name + "</a></li>";
    //     });
    //     dom += "</ul>"
    //   }
    //   $("#details")[0].innerHTML = dom;
    // },1000);
    // ex = JSON.parse(ex);
    // var shortRemark = ex.Remark;
    // var shortRemark = shortRemark.length > 30 ? (shortRemark).slice(0,30)+"…點按查看全文" : shortRemark;
    // $("#details")[0].innerHTML += "<li>" + "<h1>" + ex.Name + "</h1><h4>" + (ex.Latitude!=""?"<a>" + ex.AddressText + "</a>":ex.AddressText) + "</h4>" + 
    // "<p>" + shortRemark + "</p><div>";
    // ex.Image.forEach(function(item){
    //   $("#details")[0].innerHTML += "<img src='" + item + "' />";
    // });
    
  
  $("#openViewAllPage").click();

  
  
  // var string = "This is my compression test.";
  // alert("Size of sample is: " + string.length);
  // var compressed = LZString.compress(string);
  // alert("Size of compressed sample is: " + compressed.length);
  // string = LZString.decompress(compressed);
  // alert("Sample is: " + string);